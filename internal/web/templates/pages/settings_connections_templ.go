// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.960
// internal/web/templates/pages/settings_connections.templ

package pages

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"github.com/good-yellow-bee/blazelog/internal/web/session"
	"github.com/good-yellow-bee/blazelog/internal/web/templates/components"
	"github.com/good-yellow-bee/blazelog/internal/web/templates/layouts"
)

func SettingsConnections(user *session.Session, csrfToken string) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div x-data=\"connectionsController()\" x-init=\"init()\" class=\"space-y-6\"><!-- Header --><div class=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\"><div><h1 class=\"text-2xl font-bold text-gray-900\">Connections</h1><p class=\"mt-1 text-sm text-gray-500\">Manage SSH connections for log collection</p></div><button @click=\"openCreate()\" class=\"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-md hover:bg-indigo-700 transition-colors\"><svg class=\"w-4 h-4 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"></path></svg> Create Connection</button></div><!-- Filters --><div class=\"bg-white shadow rounded-lg p-4\"><div class=\"flex flex-col sm:flex-row gap-4\"><div class=\"flex-1\"><label class=\"label\">Search</label> <input type=\"text\" x-model=\"search\" @input.debounce.300ms=\"filterConnections()\" placeholder=\"Search connections...\" class=\"input-field\"></div><div class=\"sm:w-48\"><label class=\"label\">Project</label> <select x-model=\"filterProject\" @change=\"loadConnections()\" class=\"select-field\"><option value=\"\">All Projects</option><template x-for=\"p in projects\" :key=\"p.id\"><option :value=\"p.id\" x-text=\"p.name\"></option></template></select></div><div class=\"sm:w-36\"><label class=\"label\">Status</label> <select x-model=\"filterStatus\" @change=\"filterConnections()\" class=\"select-field\"><option value=\"\">All Statuses</option> <option value=\"connected\">Connected</option> <option value=\"failed\">Failed</option> <option value=\"unknown\">Unknown</option></select></div></div></div><!-- Connections Table --><div class=\"bg-white shadow rounded-lg overflow-hidden\"><!-- Loading state --><div x-show=\"loading\" class=\"p-8 text-center\"><svg class=\"animate-spin h-8 w-8 mx-auto text-indigo-600\" fill=\"none\" viewBox=\"0 0 24 24\"><circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle> <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg><p class=\"mt-2 text-gray-500\">Loading connections...</p></div><!-- Empty state --><div x-show=\"!loading && filteredConnections.length === 0\" class=\"p-8 text-center\"><svg class=\"mx-auto h-12 w-12 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01\"></path></svg><h3 class=\"mt-2 text-sm font-medium text-gray-900\">No connections found</h3><p class=\"mt-1 text-sm text-gray-500\">Get started by creating a new SSH connection.</p></div><!-- Table --><div x-show=\"!loading && filteredConnections.length > 0\" class=\"overflow-x-auto\"><table class=\"min-w-full divide-y divide-gray-200\"><thead class=\"bg-gray-50\"><tr><th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Name</th><th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Type</th><th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Host</th><th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th><th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Last Tested</th><th class=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th></tr></thead> <tbody id=\"connections-tbody\" class=\"bg-white divide-y divide-gray-200\"><!-- Rows rendered by Alpine.js --></tbody></table></div></div><!-- Create/Edit Modal -->")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = ConnectionFormModal().Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "<!-- Delete Confirmation -->")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = components.ConfirmDialogDynamic(
				"showDeleteModal",
				"deleteConnection()",
				"'Delete Connection'",
				"'Are you sure you want to delete \"' + (selectedConnection?.name || '') + '\"? This action cannot be undone.'",
			).Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "</div>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = ConnectionsScript().Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = layouts.Base("Connections", user, csrfToken).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func ConnectionFormModal() templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var3 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var3 == nil {
			templ_7745c5c3_Var3 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var4 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Var5 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
				templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
				templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
				if !templ_7745c5c3_IsBuffer {
					defer func() {
						templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
						if templ_7745c5c3_Err == nil {
							templ_7745c5c3_Err = templ_7745c5c3_BufErr
						}
					}()
				}
				ctx = templ.InitializeContext(ctx)
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "<div class=\"space-y-4\"><!-- Name --><div><label class=\"label\">Name <span class=\"text-red-500\">*</span></label> <input type=\"text\" x-model=\"form.name\" class=\"input-field\" placeholder=\"Connection name\"><p x-show=\"errors.name\" x-text=\"errors.name\" class=\"mt-1 text-sm text-red-600\"></p></div><!-- Type --><div><label class=\"label\">Type <span class=\"text-red-500\">*</span></label> <select x-model=\"form.type\" class=\"select-field\"><option value=\"ssh\">SSH</option> <option value=\"local\">Local</option></select></div><!-- SSH fields --><div x-show=\"form.type === 'ssh'\" class=\"space-y-4\"><div class=\"grid grid-cols-2 gap-4\"><div><label class=\"label\">Host <span class=\"text-red-500\">*</span></label> <input type=\"text\" x-model=\"form.host\" class=\"input-field\" placeholder=\"192.168.1.100\"></div><div><label class=\"label\">Port</label> <input type=\"number\" x-model.number=\"form.port\" class=\"input-field\" placeholder=\"22\"></div></div><div><label class=\"label\">Username <span class=\"text-red-500\">*</span></label> <input type=\"text\" x-model=\"form.user\" class=\"input-field\" placeholder=\"blazelog\"></div><!-- Credentials notice --><div x-show=\"selectedConnection\" class=\"p-3 bg-yellow-50 text-yellow-800 rounded-md text-sm\"><strong>Note:</strong> Credentials are never displayed. Leave the SSH key field empty to keep existing credentials, or enter a new key to replace them.</div><div><label class=\"label\">SSH Private Key <span x-show=\"!selectedConnection\" class=\"text-red-500\">*</span></label> <textarea x-model=\"form.credentials\" class=\"input-field font-mono text-xs\" rows=\"6\" placeholder=\"-----BEGIN OPENSSH PRIVATE KEY-----\n...\n-----END OPENSSH PRIVATE KEY-----\"></textarea><p class=\"mt-1 text-xs text-gray-500\">Paste your SSH private key (Ed25519 or RSA)</p></div></div><!-- Project --><div><label class=\"label\">Project</label> <select x-model=\"form.project_id\" class=\"select-field\"><option value=\"\">No Project</option><template x-for=\"p in projects\" :key=\"p.id\"><option :value=\"p.id\" x-text=\"p.name\"></option></template></select></div><!-- Error message --><div x-show=\"formError\" class=\"p-3 bg-red-50 text-red-700 rounded-md text-sm\" x-text=\"formError\"></div></div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				return nil
			})
			templ_7745c5c3_Err = components.ModalBody().Render(templ.WithChildren(ctx, templ_7745c5c3_Var5), templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, " ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Var6 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
				templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
				templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
				if !templ_7745c5c3_IsBuffer {
					defer func() {
						templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
						if templ_7745c5c3_Err == nil {
							templ_7745c5c3_Err = templ_7745c5c3_BufErr
						}
					}()
				}
				ctx = templ.InitializeContext(ctx)
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "<button type=\"button\" @click=\"showFormModal = false\" class=\"btn-secondary\">Cancel</button> <button type=\"button\" @click=\"saveConnection()\" :disabled=\"saving\" class=\"btn-primary w-auto\"><span x-show=\"!saving\">Save</span> <span x-show=\"saving\">Saving...</span></button>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				return nil
			})
			templ_7745c5c3_Err = components.ModalFooter().Render(templ.WithChildren(ctx, templ_7745c5c3_Var6), templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = components.ModalWithFooter("showFormModal", "formTitle").Render(templ.WithChildren(ctx, templ_7745c5c3_Var4), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func ConnectionsScript() templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var7 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var7 == nil {
			templ_7745c5c3_Var7 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "<script>\n\t\tfunction connectionsController() {\n\t\t\treturn {\n\t\t\t\t// Data\n\t\t\t\tconnections: [],\n\t\t\t\tfilteredConnections: [],\n\t\t\t\tprojects: [],\n\t\t\t\tloading: false,\n\t\t\t\tsaving: false,\n\n\t\t\t\t// Filters\n\t\t\t\tsearch: '',\n\t\t\t\tfilterProject: '',\n\t\t\t\tfilterStatus: '',\n\n\t\t\t\t// Modal state\n\t\t\t\tshowFormModal: false,\n\t\t\t\tshowDeleteModal: false,\n\t\t\t\tselectedConnection: null,\n\t\t\t\tformTitle: 'Create Connection',\n\t\t\t\tformError: '',\n\t\t\t\terrors: {},\n\n\t\t\t\t// Testing state\n\t\t\t\ttestingId: null,\n\n\t\t\t\t// Form data\n\t\t\t\tform: {\n\t\t\t\t\tname: '',\n\t\t\t\t\ttype: 'ssh',\n\t\t\t\t\thost: '',\n\t\t\t\t\tport: 22,\n\t\t\t\t\tuser: '',\n\t\t\t\t\tcredentials: '',\n\t\t\t\t\tproject_id: ''\n\t\t\t\t},\n\n\t\t\t\tinit() {\n\t\t\t\t\tthis.loadProjects();\n\t\t\t\t\tthis.loadConnections();\n\t\t\t\t},\n\n\t\t\t\tasync loadProjects() {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst res = await csrfFetch('/api/v1/projects');\n\t\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\t\tconst data = await res.json();\n\t\t\t\t\t\t\tthis.projects = data.data || [];\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error('Failed to load projects:', e);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tasync loadConnections() {\n\t\t\t\t\tthis.loading = true;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst params = new URLSearchParams();\n\t\t\t\t\t\tif (this.filterProject) {\n\t\t\t\t\t\t\tparams.set('project_id', this.filterProject);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst res = await csrfFetch(`/api/v1/connections?${params}`);\n\t\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\t\tconst data = await res.json();\n\t\t\t\t\t\t\tthis.connections = data.data || [];\n\t\t\t\t\t\t\tthis.filterConnections();\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error('Failed to load connections:', e);\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tfilterConnections() {\n\t\t\t\t\tlet filtered = [...this.connections];\n\n\t\t\t\t\tif (this.search) {\n\t\t\t\t\t\tconst q = this.search.toLowerCase();\n\t\t\t\t\t\tfiltered = filtered.filter(c =>\n\t\t\t\t\t\t\tc.name.toLowerCase().includes(q) ||\n\t\t\t\t\t\t\t(c.host && c.host.toLowerCase().includes(q))\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.filterStatus) {\n\t\t\t\t\t\tfiltered = filtered.filter(c => c.status === this.filterStatus);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.filteredConnections = filtered;\n\t\t\t\t\tthis.renderTable();\n\t\t\t\t},\n\n\t\t\t\trenderTable() {\n\t\t\t\t\tconst tbody = document.getElementById('connections-tbody');\n\t\t\t\t\tif (!tbody) return;\n\n\t\t\t\t\twhile (tbody.firstChild) {\n\t\t\t\t\t\ttbody.removeChild(tbody.firstChild);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.filteredConnections.forEach(conn => {\n\t\t\t\t\t\tconst tr = document.createElement('tr');\n\t\t\t\t\t\ttr.className = 'hover:bg-gray-50';\n\n\t\t\t\t\t\t// Name cell\n\t\t\t\t\t\tconst tdName = document.createElement('td');\n\t\t\t\t\t\ttdName.className = 'px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900';\n\t\t\t\t\t\ttdName.textContent = conn.name;\n\t\t\t\t\t\ttr.appendChild(tdName);\n\n\t\t\t\t\t\t// Type cell\n\t\t\t\t\t\tconst tdType = document.createElement('td');\n\t\t\t\t\t\ttdType.className = 'px-6 py-4 whitespace-nowrap';\n\t\t\t\t\t\tconst typeSpan = document.createElement('span');\n\t\t\t\t\t\ttypeSpan.className = 'badge badge-gray';\n\t\t\t\t\t\ttypeSpan.textContent = conn.type.toUpperCase();\n\t\t\t\t\t\ttdType.appendChild(typeSpan);\n\t\t\t\t\t\ttr.appendChild(tdType);\n\n\t\t\t\t\t\t// Host cell\n\t\t\t\t\t\tconst tdHost = document.createElement('td');\n\t\t\t\t\t\ttdHost.className = 'px-6 py-4 whitespace-nowrap text-sm text-gray-500';\n\t\t\t\t\t\tif (conn.type === 'ssh') {\n\t\t\t\t\t\t\ttdHost.textContent = conn.host + ':' + (conn.port || 22);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttdHost.textContent = 'Local';\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttr.appendChild(tdHost);\n\n\t\t\t\t\t\t// Status cell - using safe DOM methods\n\t\t\t\t\t\tconst tdStatus = document.createElement('td');\n\t\t\t\t\t\ttdStatus.className = 'px-6 py-4 whitespace-nowrap';\n\t\t\t\t\t\tconst statusSpan = document.createElement('span');\n\t\t\t\t\t\tstatusSpan.className = this.getStatusBadgeClass(conn.status);\n\t\t\t\t\t\t// Create dot using DOM\n\t\t\t\t\t\tconst dotSpan = document.createElement('span');\n\t\t\t\t\t\tdotSpan.className = this.getStatusDotClass(conn.status);\n\t\t\t\t\t\tstatusSpan.appendChild(dotSpan);\n\t\t\t\t\t\t// Create text node\n\t\t\t\t\t\tconst statusText = document.createTextNode(conn.status || 'unknown');\n\t\t\t\t\t\tstatusSpan.appendChild(statusText);\n\t\t\t\t\t\ttdStatus.appendChild(statusSpan);\n\t\t\t\t\t\ttr.appendChild(tdStatus);\n\n\t\t\t\t\t\t// Last tested cell\n\t\t\t\t\t\tconst tdTested = document.createElement('td');\n\t\t\t\t\t\ttdTested.className = 'px-6 py-4 whitespace-nowrap text-sm text-gray-500';\n\t\t\t\t\t\tif (conn.last_tested_at) {\n\t\t\t\t\t\t\ttdTested.textContent = this.formatRelativeTime(conn.last_tested_at);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttdTested.textContent = 'Never';\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttr.appendChild(tdTested);\n\n\t\t\t\t\t\t// Actions cell\n\t\t\t\t\t\tconst tdActions = document.createElement('td');\n\t\t\t\t\t\ttdActions.className = 'px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2';\n\n\t\t\t\t\t\t// Test button - using textContent for safe rendering\n\t\t\t\t\t\tconst testBtn = document.createElement('button');\n\t\t\t\t\t\ttestBtn.className = 'text-green-600 hover:text-green-900';\n\t\t\t\t\t\tif (this.testingId === conn.id) {\n\t\t\t\t\t\t\ttestBtn.textContent = 'Testing...';\n\t\t\t\t\t\t\ttestBtn.disabled = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttestBtn.textContent = 'Test';\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttestBtn.onclick = () => this.testConnection(conn);\n\t\t\t\t\t\ttdActions.appendChild(testBtn);\n\n\t\t\t\t\t\tconst editBtn = document.createElement('button');\n\t\t\t\t\t\teditBtn.className = 'text-indigo-600 hover:text-indigo-900';\n\t\t\t\t\t\teditBtn.textContent = 'Edit';\n\t\t\t\t\t\teditBtn.onclick = () => this.openEdit(conn);\n\t\t\t\t\t\ttdActions.appendChild(editBtn);\n\n\t\t\t\t\t\tconst delBtn = document.createElement('button');\n\t\t\t\t\t\tdelBtn.className = 'text-red-600 hover:text-red-900';\n\t\t\t\t\t\tdelBtn.textContent = 'Delete';\n\t\t\t\t\t\tdelBtn.onclick = () => this.openDelete(conn);\n\t\t\t\t\t\ttdActions.appendChild(delBtn);\n\n\t\t\t\t\t\ttr.appendChild(tdActions);\n\t\t\t\t\t\ttbody.appendChild(tr);\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tgetStatusBadgeClass(status) {\n\t\t\t\t\tconst base = 'badge inline-flex items-center gap-1.5';\n\t\t\t\t\tswitch (status) {\n\t\t\t\t\t\tcase 'connected': return base + ' badge-green';\n\t\t\t\t\t\tcase 'failed': return base + ' badge-red';\n\t\t\t\t\t\tdefault: return base + ' badge-gray';\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tgetStatusDotClass(status) {\n\t\t\t\t\tconst base = 'w-1.5 h-1.5 rounded-full inline-block';\n\t\t\t\t\tswitch (status) {\n\t\t\t\t\t\tcase 'connected': return base + ' bg-green-400';\n\t\t\t\t\t\tcase 'failed': return base + ' bg-red-400';\n\t\t\t\t\t\tdefault: return base + ' bg-gray-400';\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tformatRelativeTime(dateStr) {\n\t\t\t\t\tconst date = new Date(dateStr);\n\t\t\t\t\tconst now = new Date();\n\t\t\t\t\tconst diff = Math.floor((now - date) / 1000);\n\n\t\t\t\t\tif (diff < 60) return 'Just now';\n\t\t\t\t\tif (diff < 3600) return Math.floor(diff / 60) + 'm ago';\n\t\t\t\t\tif (diff < 86400) return Math.floor(diff / 3600) + 'h ago';\n\t\t\t\t\treturn Math.floor(diff / 86400) + 'd ago';\n\t\t\t\t},\n\n\t\t\t\tresetForm() {\n\t\t\t\t\tthis.form = {\n\t\t\t\t\t\tname: '',\n\t\t\t\t\t\ttype: 'ssh',\n\t\t\t\t\t\thost: '',\n\t\t\t\t\t\tport: 22,\n\t\t\t\t\t\tuser: '',\n\t\t\t\t\t\tcredentials: '',\n\t\t\t\t\t\tproject_id: ''\n\t\t\t\t\t};\n\t\t\t\t\tthis.errors = {};\n\t\t\t\t\tthis.formError = '';\n\t\t\t\t},\n\n\t\t\t\topenCreate() {\n\t\t\t\t\tthis.resetForm();\n\t\t\t\t\tthis.selectedConnection = null;\n\t\t\t\t\tthis.formTitle = 'Create Connection';\n\t\t\t\t\tthis.showFormModal = true;\n\t\t\t\t},\n\n\t\t\t\topenEdit(conn) {\n\t\t\t\t\tthis.selectedConnection = conn;\n\t\t\t\t\tthis.formTitle = 'Edit Connection';\n\t\t\t\t\tthis.form = {\n\t\t\t\t\t\tname: conn.name,\n\t\t\t\t\t\ttype: conn.type,\n\t\t\t\t\t\thost: conn.host || '',\n\t\t\t\t\t\tport: conn.port || 22,\n\t\t\t\t\t\tuser: conn.user || '',\n\t\t\t\t\t\tcredentials: '', // Never display credentials\n\t\t\t\t\t\tproject_id: conn.project_id || ''\n\t\t\t\t\t};\n\t\t\t\t\tthis.errors = {};\n\t\t\t\t\tthis.formError = '';\n\t\t\t\t\tthis.showFormModal = true;\n\t\t\t\t},\n\n\t\t\t\topenDelete(conn) {\n\t\t\t\t\tthis.selectedConnection = conn;\n\t\t\t\t\tthis.showDeleteModal = true;\n\t\t\t\t},\n\n\t\t\t\tasync testConnection(conn) {\n\t\t\t\t\tthis.testingId = conn.id;\n\t\t\t\t\tthis.renderTable(); // Update button state\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst res = await csrfFetch('/api/v1/connections/' + conn.id + '/test', {\n\t\t\t\t\t\t\tmethod: 'POST'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\t\tconst data = await res.json();\n\t\t\t\t\t\t\t// Update connection status in list\n\t\t\t\t\t\t\tconst idx = this.connections.findIndex(c => c.id === conn.id);\n\t\t\t\t\t\t\tif (idx !== -1) {\n\t\t\t\t\t\t\t\tthis.connections[idx].status = data.data?.status || 'connected';\n\t\t\t\t\t\t\t\tthis.connections[idx].last_tested_at = new Date().toISOString();\n\t\t\t\t\t\t\t\tthis.filterConnections();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst data = await res.json();\n\t\t\t\t\t\t\t// Update status to failed\n\t\t\t\t\t\t\tconst idx = this.connections.findIndex(c => c.id === conn.id);\n\t\t\t\t\t\t\tif (idx !== -1) {\n\t\t\t\t\t\t\t\tthis.connections[idx].status = 'failed';\n\t\t\t\t\t\t\t\tthis.connections[idx].last_tested_at = new Date().toISOString();\n\t\t\t\t\t\t\t\tthis.filterConnections();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\talert(data.error?.message || 'Connection test failed');\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\talert('Network error. Please try again.');\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.testingId = null;\n\t\t\t\t\t\tthis.renderTable();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tasync saveConnection() {\n\t\t\t\t\tthis.errors = {};\n\t\t\t\t\tthis.formError = '';\n\n\t\t\t\t\t// Validate\n\t\t\t\t\tif (!this.form.name.trim()) {\n\t\t\t\t\t\tthis.errors.name = 'Name is required';\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.form.type === 'ssh') {\n\t\t\t\t\t\tif (!this.form.host.trim()) {\n\t\t\t\t\t\t\tthis.formError = 'Host is required for SSH connections';\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!this.form.user.trim()) {\n\t\t\t\t\t\t\tthis.formError = 'Username is required for SSH connections';\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Credentials required for new connections\n\t\t\t\t\t\tif (!this.selectedConnection && !this.form.credentials.trim()) {\n\t\t\t\t\t\t\tthis.formError = 'SSH key is required for new connections';\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.saving = true;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst url = this.selectedConnection\n\t\t\t\t\t\t\t? '/api/v1/connections/' + this.selectedConnection.id\n\t\t\t\t\t\t\t: '/api/v1/connections';\n\t\t\t\t\t\tconst method = this.selectedConnection ? 'PUT' : 'POST';\n\n\t\t\t\t\t\t// Don't send empty credentials on edit\n\t\t\t\t\t\tconst payload = { ...this.form };\n\t\t\t\t\t\tif (this.selectedConnection && !payload.credentials) {\n\t\t\t\t\t\t\tdelete payload.credentials;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst res = await csrfFetch(url, {\n\t\t\t\t\t\t\tmethod: method,\n\t\t\t\t\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\t\t\t\t\tbody: JSON.stringify(payload)\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\t\tthis.showFormModal = false;\n\t\t\t\t\t\t\tthis.loadConnections();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst data = await res.json();\n\t\t\t\t\t\t\tthis.formError = data.error?.message || 'Failed to save connection';\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tthis.formError = 'Network error. Please try again.';\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.saving = false;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tasync deleteConnection() {\n\t\t\t\t\tif (!this.selectedConnection) return;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst res = await csrfFetch('/api/v1/connections/' + this.selectedConnection.id, {\n\t\t\t\t\t\t\tmethod: 'DELETE'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\t\tthis.showDeleteModal = false;\n\t\t\t\t\t\t\tthis.selectedConnection = null;\n\t\t\t\t\t\t\tthis.loadConnections();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst data = await res.json();\n\t\t\t\t\t\t\talert(data.error?.message || 'Failed to delete connection');\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\talert('Network error. Please try again.');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t</script>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
