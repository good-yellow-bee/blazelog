// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.960
// internal/web/templates/pages/settings_alerts.templ

package pages

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"github.com/good-yellow-bee/blazelog/internal/web/session"
	"github.com/good-yellow-bee/blazelog/internal/web/templates/components"
	"github.com/good-yellow-bee/blazelog/internal/web/templates/layouts"
)

func SettingsAlerts(user *session.Session) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div x-data=\"alertsController()\" x-init=\"init()\" class=\"space-y-6\"><!-- Header --><div class=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\"><div><h1 class=\"text-2xl font-bold text-gray-900\">Alert Rules</h1><p class=\"mt-1 text-sm text-gray-500\">Manage alert rules for log monitoring</p></div>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if user.Role == "admin" || user.Role == "operator" {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "<button @click=\"openCreate()\" class=\"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-md hover:bg-indigo-700 transition-colors\"><svg class=\"w-4 h-4 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"></path></svg> Create Alert</button>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "</div><!-- Filters --><div class=\"bg-white shadow rounded-lg p-4\"><div class=\"flex flex-col sm:flex-row gap-4\"><div class=\"flex-1\"><label class=\"label\">Search</label> <input type=\"text\" x-model=\"search\" @input.debounce.300ms=\"filterAlerts()\" placeholder=\"Search alerts...\" class=\"input-field\"></div><div class=\"sm:w-48\"><label class=\"label\">Project</label> <select x-model=\"filterProject\" @change=\"loadAlerts()\" class=\"select-field\"><option value=\"\">All Projects</option><template x-for=\"p in projects\" :key=\"p.id\"><option :value=\"p.id\" x-text=\"p.name\"></option></template></select></div><div class=\"sm:w-36\"><label class=\"label\">Type</label> <select x-model=\"filterType\" @change=\"filterAlerts()\" class=\"select-field\"><option value=\"\">All Types</option> <option value=\"pattern\">Pattern</option> <option value=\"threshold\">Threshold</option></select></div></div></div><!-- Alerts Table --><div class=\"bg-white shadow rounded-lg overflow-hidden\"><!-- Loading state --><div x-show=\"loading\" class=\"p-8 text-center\"><svg class=\"animate-spin h-8 w-8 mx-auto text-indigo-600\" fill=\"none\" viewBox=\"0 0 24 24\"><circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle> <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg><p class=\"mt-2 text-gray-500\">Loading alerts...</p></div><!-- Empty state --><div x-show=\"!loading && filteredAlerts.length === 0\" class=\"p-8 text-center\"><svg class=\"mx-auto h-12 w-12 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\"></path></svg><h3 class=\"mt-2 text-sm font-medium text-gray-900\">No alerts found</h3><p class=\"mt-1 text-sm text-gray-500\">Get started by creating a new alert rule.</p></div><!-- Table --><div x-show=\"!loading && filteredAlerts.length > 0\" class=\"overflow-x-auto\"><table class=\"min-w-full divide-y divide-gray-200\"><thead class=\"bg-gray-50\"><tr><th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Name</th><th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Type</th><th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Severity</th><th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th><th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Project</th><th class=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th></tr></thead> <tbody id=\"alerts-tbody\" class=\"bg-white divide-y divide-gray-200\"><!-- Rows rendered by Alpine.js --></tbody></table></div></div><!-- Create/Edit Modal -->")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if user.Role == "admin" || user.Role == "operator" {
				templ_7745c5c3_Err = AlertFormModal(user.Role).Render(ctx, templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "<!-- Delete Confirmation -->")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if user.Role == "admin" {
				templ_7745c5c3_Err = components.ConfirmDialogDynamic(
					"showDeleteModal",
					"deleteAlert()",
					"'Delete Alert'",
					"'Are you sure you want to delete \"' + (selectedAlert?.name || '') + '\"? This action cannot be undone.'",
				).Render(ctx, templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "</div>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = AlertsScript(user.Role).Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = layouts.Base("Alerts", user).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func AlertFormModal(role string) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var3 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var3 == nil {
			templ_7745c5c3_Var3 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var4 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Var5 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
				templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
				templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
				if !templ_7745c5c3_IsBuffer {
					defer func() {
						templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
						if templ_7745c5c3_Err == nil {
							templ_7745c5c3_Err = templ_7745c5c3_BufErr
						}
					}()
				}
				ctx = templ.InitializeContext(ctx)
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "<div class=\"space-y-4\"><!-- Name --><div><label class=\"label\">Name <span class=\"text-red-500\">*</span></label> <input type=\"text\" x-model=\"form.name\" class=\"input-field\" placeholder=\"Alert name\"><p x-show=\"errors.name\" x-text=\"errors.name\" class=\"mt-1 text-sm text-red-600\"></p></div><!-- Description --><div><label class=\"label\">Description</label> <textarea x-model=\"form.description\" class=\"input-field\" rows=\"2\" placeholder=\"Optional description\"></textarea></div><!-- Type --><div><label class=\"label\">Type <span class=\"text-red-500\">*</span></label> <select x-model=\"form.type\" class=\"select-field\"><option value=\"pattern\">Pattern Match</option> <option value=\"threshold\">Threshold</option></select></div><!-- Condition --><div><label class=\"label\">Condition <span class=\"text-red-500\">*</span></label> <textarea x-model=\"form.condition\" class=\"input-field font-mono text-sm\" rows=\"3\" placeholder='{\"pattern\": \"ERROR|FATAL\"}'></textarea><p class=\"mt-1 text-xs text-gray-500\">JSON condition for the alert rule</p></div><!-- Severity --><div><label class=\"label\">Severity <span class=\"text-red-500\">*</span></label> <select x-model=\"form.severity\" class=\"select-field\"><option value=\"low\">Low</option> <option value=\"medium\">Medium</option> <option value=\"high\">High</option> <option value=\"critical\">Critical</option></select></div><!-- Window and Cooldown --><div class=\"grid grid-cols-2 gap-4\"><div><label class=\"label\">Window</label> <input type=\"text\" x-model=\"form.window\" class=\"input-field\" placeholder=\"5m\"><p class=\"mt-1 text-xs text-gray-500\">e.g., 5m, 1h</p></div><div><label class=\"label\">Cooldown</label> <input type=\"text\" x-model=\"form.cooldown\" class=\"input-field\" placeholder=\"15m\"><p class=\"mt-1 text-xs text-gray-500\">Min time between alerts</p></div></div><!-- Project --><div><label class=\"label\">Project</label> <select x-model=\"form.project_id\" class=\"select-field\"><option value=\"\">No Project (Global)</option><template x-for=\"p in projects\" :key=\"p.id\"><option :value=\"p.id\" x-text=\"p.name\"></option></template></select></div><!-- Notify Channels --><div><label class=\"label\">Notification Channels</label><div class=\"space-y-2\"><label class=\"flex items-center\"><input type=\"checkbox\" x-model=\"form.notify\" value=\"email\" class=\"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500\"> <span class=\"ml-2 text-sm text-gray-700\">Email</span></label> <label class=\"flex items-center\"><input type=\"checkbox\" x-model=\"form.notify\" value=\"slack\" class=\"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500\"> <span class=\"ml-2 text-sm text-gray-700\">Slack</span></label> <label class=\"flex items-center\"><input type=\"checkbox\" x-model=\"form.notify\" value=\"teams\" class=\"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500\"> <span class=\"ml-2 text-sm text-gray-700\">Microsoft Teams</span></label></div></div><!-- Enabled --><div><label class=\"flex items-center\"><input type=\"checkbox\" x-model=\"form.enabled\" class=\"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500\"> <span class=\"ml-2 text-sm text-gray-700\">Enabled</span></label></div><!-- Error message --><div x-show=\"formError\" class=\"p-3 bg-red-50 text-red-700 rounded-md text-sm\" x-text=\"formError\"></div></div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				return nil
			})
			templ_7745c5c3_Err = components.ModalBody().Render(templ.WithChildren(ctx, templ_7745c5c3_Var5), templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, " ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Var6 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
				templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
				templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
				if !templ_7745c5c3_IsBuffer {
					defer func() {
						templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
						if templ_7745c5c3_Err == nil {
							templ_7745c5c3_Err = templ_7745c5c3_BufErr
						}
					}()
				}
				ctx = templ.InitializeContext(ctx)
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, "<button type=\"button\" @click=\"showFormModal = false\" class=\"btn-secondary\">Cancel</button> <button type=\"button\" @click=\"saveAlert()\" :disabled=\"saving\" class=\"btn-primary w-auto\"><span x-show=\"!saving\">Save</span> <span x-show=\"saving\" class=\"flex items-center\"><svg class=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\" fill=\"none\" viewBox=\"0 0 24 24\"><circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle> <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg> Saving...</span></button>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				return nil
			})
			templ_7745c5c3_Err = components.ModalFooter().Render(templ.WithChildren(ctx, templ_7745c5c3_Var6), templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = components.ModalWithFooter("showFormModal", "formTitle").Render(templ.WithChildren(ctx, templ_7745c5c3_Var4), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func AlertsScript(role string) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var7 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var7 == nil {
			templ_7745c5c3_Var7 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, "<script>\n\t\tfunction alertsController() {\n\t\t\treturn {\n\t\t\t\t// Data\n\t\t\t\talerts: [],\n\t\t\t\tfilteredAlerts: [],\n\t\t\t\tprojects: [],\n\t\t\t\tloading: false,\n\t\t\t\tsaving: false,\n\n\t\t\t\t// Filters\n\t\t\t\tsearch: '',\n\t\t\t\tfilterProject: '',\n\t\t\t\tfilterType: '',\n\n\t\t\t\t// Modal state\n\t\t\t\tshowFormModal: false,\n\t\t\t\tshowDeleteModal: false,\n\t\t\t\tselectedAlert: null,\n\t\t\t\tformTitle: 'Create Alert',\n\t\t\t\tformError: '',\n\t\t\t\terrors: {},\n\n\t\t\t\t// Form data\n\t\t\t\tform: {\n\t\t\t\t\tname: '',\n\t\t\t\t\tdescription: '',\n\t\t\t\t\ttype: 'pattern',\n\t\t\t\t\tcondition: '',\n\t\t\t\t\tseverity: 'medium',\n\t\t\t\t\twindow: '5m',\n\t\t\t\t\tcooldown: '15m',\n\t\t\t\t\tnotify: [],\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tproject_id: ''\n\t\t\t\t},\n\n\t\t\t\t// User role for RBAC\n\t\t\t\tuserRole: '")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Var8, templ_7745c5c3_Err := templruntime.ScriptContentInsideStringLiteral(role)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/settings_alerts.templ`, Line: 316, Col: 22}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ_7745c5c3_Var8)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, "',\n\n\t\t\t\tinit() {\n\t\t\t\t\tthis.loadProjects();\n\t\t\t\t\tthis.loadAlerts();\n\t\t\t\t},\n\n\t\t\t\tasync loadProjects() {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst res = await fetch('/api/v1/projects');\n\t\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\t\tconst data = await res.json();\n\t\t\t\t\t\t\tthis.projects = data.data || [];\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error('Failed to load projects:', e);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tasync loadAlerts() {\n\t\t\t\t\tthis.loading = true;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst params = new URLSearchParams();\n\t\t\t\t\t\tif (this.filterProject) {\n\t\t\t\t\t\t\tparams.set('project_id', this.filterProject);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst res = await fetch(`/api/v1/alerts?${params}`);\n\t\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\t\tconst data = await res.json();\n\t\t\t\t\t\t\tthis.alerts = data.data || [];\n\t\t\t\t\t\t\tthis.filterAlerts();\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error('Failed to load alerts:', e);\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tfilterAlerts() {\n\t\t\t\t\tlet filtered = [...this.alerts];\n\n\t\t\t\t\tif (this.search) {\n\t\t\t\t\t\tconst q = this.search.toLowerCase();\n\t\t\t\t\t\tfiltered = filtered.filter(a =>\n\t\t\t\t\t\t\ta.name.toLowerCase().includes(q) ||\n\t\t\t\t\t\t\t(a.description && a.description.toLowerCase().includes(q))\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.filterType) {\n\t\t\t\t\t\tfiltered = filtered.filter(a => a.type === this.filterType);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.filteredAlerts = filtered;\n\t\t\t\t\tthis.renderTable();\n\t\t\t\t},\n\n\t\t\t\trenderTable() {\n\t\t\t\t\tconst tbody = document.getElementById('alerts-tbody');\n\t\t\t\t\tif (!tbody) return;\n\n\t\t\t\t\twhile (tbody.firstChild) {\n\t\t\t\t\t\ttbody.removeChild(tbody.firstChild);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst canEdit = this.userRole === 'admin' || this.userRole === 'operator';\n\t\t\t\t\tconst canDelete = this.userRole === 'admin';\n\n\t\t\t\t\tthis.filteredAlerts.forEach(alert => {\n\t\t\t\t\t\tconst tr = document.createElement('tr');\n\t\t\t\t\t\ttr.className = 'hover:bg-gray-50';\n\n\t\t\t\t\t\t// Name cell\n\t\t\t\t\t\tconst tdName = document.createElement('td');\n\t\t\t\t\t\ttdName.className = 'px-6 py-4 whitespace-nowrap';\n\t\t\t\t\t\tconst nameDiv = document.createElement('div');\n\t\t\t\t\t\tnameDiv.className = 'text-sm font-medium text-gray-900';\n\t\t\t\t\t\tnameDiv.textContent = alert.name;\n\t\t\t\t\t\ttdName.appendChild(nameDiv);\n\t\t\t\t\t\tif (alert.description) {\n\t\t\t\t\t\t\tconst descDiv = document.createElement('div');\n\t\t\t\t\t\t\tdescDiv.className = 'text-sm text-gray-500 truncate max-w-xs';\n\t\t\t\t\t\t\tdescDiv.textContent = alert.description;\n\t\t\t\t\t\t\ttdName.appendChild(descDiv);\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttr.appendChild(tdName);\n\n\t\t\t\t\t\t// Type cell\n\t\t\t\t\t\tconst tdType = document.createElement('td');\n\t\t\t\t\t\ttdType.className = 'px-6 py-4 whitespace-nowrap';\n\t\t\t\t\t\tconst typeSpan = document.createElement('span');\n\t\t\t\t\t\ttypeSpan.className = 'badge badge-gray';\n\t\t\t\t\t\ttypeSpan.textContent = alert.type;\n\t\t\t\t\t\ttdType.appendChild(typeSpan);\n\t\t\t\t\t\ttr.appendChild(tdType);\n\n\t\t\t\t\t\t// Severity cell\n\t\t\t\t\t\tconst tdSeverity = document.createElement('td');\n\t\t\t\t\t\ttdSeverity.className = 'px-6 py-4 whitespace-nowrap';\n\t\t\t\t\t\tconst sevSpan = document.createElement('span');\n\t\t\t\t\t\tsevSpan.className = this.getSeverityBadgeClass(alert.severity);\n\t\t\t\t\t\tsevSpan.textContent = alert.severity;\n\t\t\t\t\t\ttdSeverity.appendChild(sevSpan);\n\t\t\t\t\t\ttr.appendChild(tdSeverity);\n\n\t\t\t\t\t\t// Status cell\n\t\t\t\t\t\tconst tdStatus = document.createElement('td');\n\t\t\t\t\t\ttdStatus.className = 'px-6 py-4 whitespace-nowrap';\n\t\t\t\t\t\tconst statusSpan = document.createElement('span');\n\t\t\t\t\t\tstatusSpan.className = alert.enabled ? 'badge badge-green' : 'badge badge-gray';\n\t\t\t\t\t\tstatusSpan.textContent = alert.enabled ? 'Enabled' : 'Disabled';\n\t\t\t\t\t\ttdStatus.appendChild(statusSpan);\n\t\t\t\t\t\ttr.appendChild(tdStatus);\n\n\t\t\t\t\t\t// Project cell\n\t\t\t\t\t\tconst tdProject = document.createElement('td');\n\t\t\t\t\t\ttdProject.className = 'px-6 py-4 whitespace-nowrap text-sm text-gray-500';\n\t\t\t\t\t\tconst project = this.projects.find(p => p.id === alert.project_id);\n\t\t\t\t\t\ttdProject.textContent = project ? project.name : '-';\n\t\t\t\t\t\ttr.appendChild(tdProject);\n\n\t\t\t\t\t\t// Actions cell\n\t\t\t\t\t\tconst tdActions = document.createElement('td');\n\t\t\t\t\t\ttdActions.className = 'px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2';\n\n\t\t\t\t\t\tif (canEdit) {\n\t\t\t\t\t\t\tconst editBtn = document.createElement('button');\n\t\t\t\t\t\t\teditBtn.className = 'text-indigo-600 hover:text-indigo-900';\n\t\t\t\t\t\t\teditBtn.textContent = 'Edit';\n\t\t\t\t\t\t\teditBtn.onclick = () => this.openEdit(alert);\n\t\t\t\t\t\t\ttdActions.appendChild(editBtn);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (canDelete) {\n\t\t\t\t\t\t\tconst delBtn = document.createElement('button');\n\t\t\t\t\t\t\tdelBtn.className = 'text-red-600 hover:text-red-900';\n\t\t\t\t\t\t\tdelBtn.textContent = 'Delete';\n\t\t\t\t\t\t\tdelBtn.onclick = () => this.openDelete(alert);\n\t\t\t\t\t\t\ttdActions.appendChild(delBtn);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttr.appendChild(tdActions);\n\t\t\t\t\t\ttbody.appendChild(tr);\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tgetSeverityBadgeClass(severity) {\n\t\t\t\t\tswitch (severity) {\n\t\t\t\t\t\tcase 'critical': return 'badge badge-red';\n\t\t\t\t\t\tcase 'high': return 'badge badge-yellow';\n\t\t\t\t\t\tcase 'medium': return 'badge badge-blue';\n\t\t\t\t\t\tcase 'low': return 'badge badge-gray';\n\t\t\t\t\t\tdefault: return 'badge badge-gray';\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tresetForm() {\n\t\t\t\t\tthis.form = {\n\t\t\t\t\t\tname: '',\n\t\t\t\t\t\tdescription: '',\n\t\t\t\t\t\ttype: 'pattern',\n\t\t\t\t\t\tcondition: '',\n\t\t\t\t\t\tseverity: 'medium',\n\t\t\t\t\t\twindow: '5m',\n\t\t\t\t\t\tcooldown: '15m',\n\t\t\t\t\t\tnotify: [],\n\t\t\t\t\t\tenabled: true,\n\t\t\t\t\t\tproject_id: ''\n\t\t\t\t\t};\n\t\t\t\t\tthis.errors = {};\n\t\t\t\t\tthis.formError = '';\n\t\t\t\t},\n\n\t\t\t\topenCreate() {\n\t\t\t\t\tthis.resetForm();\n\t\t\t\t\tthis.selectedAlert = null;\n\t\t\t\t\tthis.formTitle = 'Create Alert';\n\t\t\t\t\tthis.showFormModal = true;\n\t\t\t\t},\n\n\t\t\t\topenEdit(alert) {\n\t\t\t\t\tthis.selectedAlert = alert;\n\t\t\t\t\tthis.formTitle = 'Edit Alert';\n\t\t\t\t\tthis.form = {\n\t\t\t\t\t\tname: alert.name,\n\t\t\t\t\t\tdescription: alert.description || '',\n\t\t\t\t\t\ttype: alert.type,\n\t\t\t\t\t\tcondition: alert.condition,\n\t\t\t\t\t\tseverity: alert.severity,\n\t\t\t\t\t\twindow: alert.window || '5m',\n\t\t\t\t\t\tcooldown: alert.cooldown || '15m',\n\t\t\t\t\t\tnotify: alert.notify || [],\n\t\t\t\t\t\tenabled: alert.enabled,\n\t\t\t\t\t\tproject_id: alert.project_id || ''\n\t\t\t\t\t};\n\t\t\t\t\tthis.errors = {};\n\t\t\t\t\tthis.formError = '';\n\t\t\t\t\tthis.showFormModal = true;\n\t\t\t\t},\n\n\t\t\t\topenDelete(alert) {\n\t\t\t\t\tthis.selectedAlert = alert;\n\t\t\t\t\tthis.showDeleteModal = true;\n\t\t\t\t},\n\n\t\t\t\tasync saveAlert() {\n\t\t\t\t\tthis.errors = {};\n\t\t\t\t\tthis.formError = '';\n\n\t\t\t\t\t// Validate\n\t\t\t\t\tif (!this.form.name.trim()) {\n\t\t\t\t\t\tthis.errors.name = 'Name is required';\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (!this.form.condition.trim()) {\n\t\t\t\t\t\tthis.errors.condition = 'Condition is required';\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.saving = true;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst url = this.selectedAlert\n\t\t\t\t\t\t\t? `/api/v1/alerts/${this.selectedAlert.id}`\n\t\t\t\t\t\t\t: '/api/v1/alerts';\n\t\t\t\t\t\tconst method = this.selectedAlert ? 'PUT' : 'POST';\n\n\t\t\t\t\t\tconst res = await fetch(url, {\n\t\t\t\t\t\t\tmethod: method,\n\t\t\t\t\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\t\t\t\t\tbody: JSON.stringify(this.form)\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\t\tthis.showFormModal = false;\n\t\t\t\t\t\t\tthis.loadAlerts();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst data = await res.json();\n\t\t\t\t\t\t\tthis.formError = data.error?.message || 'Failed to save alert';\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tthis.formError = 'Network error. Please try again.';\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.saving = false;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tasync deleteAlert() {\n\t\t\t\t\tif (!this.selectedAlert) return;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst res = await fetch(`/api/v1/alerts/${this.selectedAlert.id}`, {\n\t\t\t\t\t\t\tmethod: 'DELETE'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\t\tthis.showDeleteModal = false;\n\t\t\t\t\t\t\tthis.selectedAlert = null;\n\t\t\t\t\t\t\tthis.loadAlerts();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst data = await res.json();\n\t\t\t\t\t\t\talert(data.error?.message || 'Failed to delete alert');\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\talert('Network error. Please try again.');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t</script>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
