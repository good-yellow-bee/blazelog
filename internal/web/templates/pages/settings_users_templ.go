// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.960
// internal/web/templates/pages/settings_users.templ

package pages

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"github.com/good-yellow-bee/blazelog/internal/web/session"
	"github.com/good-yellow-bee/blazelog/internal/web/templates/components"
	"github.com/good-yellow-bee/blazelog/internal/web/templates/layouts"
)

func SettingsUsers(user *session.Session, csrfToken string) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div x-data=\"usersController()\" x-init=\"init()\" class=\"space-y-6\"><!-- Header --><div class=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\"><div><h1 class=\"page-title\">Users</h1><p class=\"page-subtitle\">Manage user accounts and roles</p></div><button @click=\"openCreate()\" class=\"btn-primary w-auto\"><svg class=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"></path></svg> Create User</button></div><!-- Search --><div class=\"panel-soft p-4\"><div class=\"flex flex-col sm:flex-row gap-4\"><div class=\"flex-1\"><label class=\"label\">Search</label> <input type=\"text\" x-model=\"search\" @input.debounce.300ms=\"filterUsers()\" placeholder=\"Search by username or email...\" class=\"input-field\"></div><div class=\"sm:w-36\"><label class=\"label\">Role</label> <select x-model=\"filterRole\" @change=\"filterUsers()\" class=\"select-field\"><option value=\"\">All Roles</option> <option value=\"admin\">Admin</option> <option value=\"operator\">Operator</option> <option value=\"viewer\">Viewer</option></select></div></div></div><!-- Users Table --><div class=\"table-shell overflow-hidden\"><!-- Loading state --><div x-show=\"loading\" class=\"p-8 text-center\"><svg class=\"animate-spin h-8 w-8 mx-auto text-teal-600\" fill=\"none\" viewBox=\"0 0 24 24\"><circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle> <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg><p class=\"mt-2 text-slate-500\">Loading users...</p></div><!-- Empty state --><div x-show=\"!loading && filteredUsers.length === 0\" class=\"p-8 text-center\"><svg class=\"mx-auto h-12 w-12 text-slate-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z\"></path></svg><h3 class=\"mt-2 text-sm font-semibold text-slate-900\">No users found</h3><p class=\"mt-1 text-sm text-slate-500\">Try adjusting your search filters.</p></div><!-- Table --><div x-show=\"!loading && filteredUsers.length > 0\" class=\"overflow-x-auto\"><table class=\"min-w-full divide-y divide-slate-200/70\"><thead class=\"table-head\"><tr><th class=\"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-500\">User</th><th class=\"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-500\">Email</th><th class=\"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-500\">Role</th><th class=\"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-500\">Created</th><th class=\"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-500\">Actions</th></tr></thead> <tbody id=\"users-tbody\" class=\"divide-y divide-slate-200/70\"><!-- Rows rendered by Alpine.js --></tbody></table></div></div><!-- Create User Modal -->")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = UserCreateModal().Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "<!-- Edit User Modal -->")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = UserEditModal().Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "<!-- Reset Password Modal -->")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = UserPasswordModal().Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "<!-- Delete Confirmation -->")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = components.ConfirmDialogDynamic(
				"showDeleteModal",
				"deleteUser()",
				"'Delete User'",
				"'Are you sure you want to delete \"' + (selectedUser?.username || '') + '\"? This action cannot be undone.'",
			).Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "</div>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = UsersScript(user.ID).Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = layouts.Base("Users", user, csrfToken).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func UserCreateModal() templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var3 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var3 == nil {
			templ_7745c5c3_Var3 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var4 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Var5 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
				templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
				templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
				if !templ_7745c5c3_IsBuffer {
					defer func() {
						templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
						if templ_7745c5c3_Err == nil {
							templ_7745c5c3_Err = templ_7745c5c3_BufErr
						}
					}()
				}
				ctx = templ.InitializeContext(ctx)
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "<div class=\"space-y-4\"><!-- Username --><div><label class=\"label\">Username <span class=\"text-red-500\">*</span></label> <input type=\"text\" x-model=\"createForm.username\" class=\"input-field\" placeholder=\"johndoe\"><p class=\"mt-1 text-xs text-slate-500\">3-32 characters, letters, numbers, _ and -</p></div><!-- Email --><div><label class=\"label\">Email <span class=\"text-red-500\">*</span></label> <input type=\"email\" x-model=\"createForm.email\" class=\"input-field\" placeholder=\"john@example.com\"></div><!-- Password --><div><label class=\"label\">Password <span class=\"text-red-500\">*</span></label> <input type=\"password\" x-model=\"createForm.password\" class=\"input-field\" placeholder=\"Min 8 characters\"><p class=\"mt-1 text-xs text-slate-500\">Uppercase, lowercase, number, and special character</p></div><!-- Role --><div><label class=\"label\">Role <span class=\"text-red-500\">*</span></label> <select x-model=\"createForm.role\" class=\"select-field\"><option value=\"viewer\">Viewer - Read-only access</option> <option value=\"operator\">Operator - Can manage alerts</option> <option value=\"admin\">Admin - Full access</option></select></div><!-- Error message --><div x-show=\"formError\" class=\"p-3 bg-rose-50 text-rose-700 rounded-md text-sm\" x-text=\"formError\"></div></div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				return nil
			})
			templ_7745c5c3_Err = components.ModalBody().Render(templ.WithChildren(ctx, templ_7745c5c3_Var5), templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, " ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Var6 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
				templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
				templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
				if !templ_7745c5c3_IsBuffer {
					defer func() {
						templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
						if templ_7745c5c3_Err == nil {
							templ_7745c5c3_Err = templ_7745c5c3_BufErr
						}
					}()
				}
				ctx = templ.InitializeContext(ctx)
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, "<button type=\"button\" @click=\"showCreateModal = false\" class=\"btn-secondary\">Cancel</button> <button type=\"button\" @click=\"createUser()\" :disabled=\"saving\" class=\"btn-primary w-auto\"><span x-show=\"!saving\">Create</span> <span x-show=\"saving\">Creating...</span></button>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				return nil
			})
			templ_7745c5c3_Err = components.ModalFooter().Render(templ.WithChildren(ctx, templ_7745c5c3_Var6), templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = components.ModalWithFooter("showCreateModal", "'Create User'").Render(templ.WithChildren(ctx, templ_7745c5c3_Var4), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func UserEditModal() templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var7 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var7 == nil {
			templ_7745c5c3_Var7 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var8 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Var9 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
				templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
				templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
				if !templ_7745c5c3_IsBuffer {
					defer func() {
						templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
						if templ_7745c5c3_Err == nil {
							templ_7745c5c3_Err = templ_7745c5c3_BufErr
						}
					}()
				}
				ctx = templ.InitializeContext(ctx)
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, "<div class=\"space-y-4\"><!-- Username (read-only) --><div><label class=\"label\">Username</label> <input type=\"text\" :value=\"selectedUser?.username\" class=\"input-field bg-slate-100\" disabled></div><!-- Email --><div><label class=\"label\">Email <span class=\"text-red-500\">*</span></label> <input type=\"email\" x-model=\"editForm.email\" class=\"input-field\"></div><!-- Role --><div><label class=\"label\">Role <span class=\"text-red-500\">*</span></label> <select x-model=\"editForm.role\" class=\"select-field\"><option value=\"viewer\">Viewer - Read-only access</option> <option value=\"operator\">Operator - Can manage alerts</option> <option value=\"admin\">Admin - Full access</option></select><p x-show=\"selectedUser?.id === currentUserId\" class=\"mt-1 text-xs text-amber-600\">Warning: Changing your own role may affect your access</p></div><!-- Error message --><div x-show=\"formError\" class=\"p-3 bg-rose-50 text-rose-700 rounded-md text-sm\" x-text=\"formError\"></div></div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				return nil
			})
			templ_7745c5c3_Err = components.ModalBody().Render(templ.WithChildren(ctx, templ_7745c5c3_Var9), templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, " ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Var10 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
				templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
				templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
				if !templ_7745c5c3_IsBuffer {
					defer func() {
						templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
						if templ_7745c5c3_Err == nil {
							templ_7745c5c3_Err = templ_7745c5c3_BufErr
						}
					}()
				}
				ctx = templ.InitializeContext(ctx)
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 11, "<button type=\"button\" @click=\"showEditModal = false\" class=\"btn-secondary\">Cancel</button> <button type=\"button\" @click=\"updateUser()\" :disabled=\"saving\" class=\"btn-primary w-auto\"><span x-show=\"!saving\">Save</span> <span x-show=\"saving\">Saving...</span></button>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				return nil
			})
			templ_7745c5c3_Err = components.ModalFooter().Render(templ.WithChildren(ctx, templ_7745c5c3_Var10), templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = components.ModalWithFooter("showEditModal", "'Edit User'").Render(templ.WithChildren(ctx, templ_7745c5c3_Var8), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func UserPasswordModal() templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var11 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var11 == nil {
			templ_7745c5c3_Var11 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var12 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Var13 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
				templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
				templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
				if !templ_7745c5c3_IsBuffer {
					defer func() {
						templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
						if templ_7745c5c3_Err == nil {
							templ_7745c5c3_Err = templ_7745c5c3_BufErr
						}
					}()
				}
				ctx = templ.InitializeContext(ctx)
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 12, "<div class=\"space-y-4\"><p class=\"text-sm text-slate-600\">Reset password for <strong x-text=\"selectedUser?.username\"></strong></p><!-- New Password --><div><label class=\"label\">New Password <span class=\"text-red-500\">*</span></label> <input type=\"password\" x-model=\"passwordForm.password\" class=\"input-field\" placeholder=\"Min 8 characters\"><p class=\"mt-1 text-xs text-slate-500\">Uppercase, lowercase, number, and special character</p></div><!-- Confirm Password --><div><label class=\"label\">Confirm Password <span class=\"text-red-500\">*</span></label> <input type=\"password\" x-model=\"passwordForm.confirm\" class=\"input-field\" placeholder=\"Re-enter password\"></div><!-- Error message --><div x-show=\"formError\" class=\"p-3 bg-rose-50 text-rose-700 rounded-md text-sm\" x-text=\"formError\"></div></div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				return nil
			})
			templ_7745c5c3_Err = components.ModalBody().Render(templ.WithChildren(ctx, templ_7745c5c3_Var13), templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 13, " ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Var14 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
				templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
				templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
				if !templ_7745c5c3_IsBuffer {
					defer func() {
						templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
						if templ_7745c5c3_Err == nil {
							templ_7745c5c3_Err = templ_7745c5c3_BufErr
						}
					}()
				}
				ctx = templ.InitializeContext(ctx)
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 14, "<button type=\"button\" @click=\"showPasswordModal = false\" class=\"btn-secondary\">Cancel</button> <button type=\"button\" @click=\"resetPassword()\" :disabled=\"saving\" class=\"btn-primary w-auto\"><span x-show=\"!saving\">Reset Password</span> <span x-show=\"saving\">Resetting...</span></button>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				return nil
			})
			templ_7745c5c3_Err = components.ModalFooter().Render(templ.WithChildren(ctx, templ_7745c5c3_Var14), templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = components.ModalWithFooter("showPasswordModal", "'Reset Password'").Render(templ.WithChildren(ctx, templ_7745c5c3_Var12), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func UsersScript(currentUserID string) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var15 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var15 == nil {
			templ_7745c5c3_Var15 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 15, "<script>\n\t\tfunction usersController() {\n\t\t\treturn {\n\t\t\t\t// Data\n\t\t\t\tusers: [],\n\t\t\t\tfilteredUsers: [],\n\t\t\t\tloading: false,\n\t\t\t\tsaving: false,\n\t\t\t\tcurrentUserId: '")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Var16, templ_7745c5c3_Err := templruntime.ScriptContentInsideStringLiteral(currentUserID)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/settings_users.templ`, Line: 300, Col: 36}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ_7745c5c3_Var16)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 16, "',\n\n\t\t\t\t// Filters\n\t\t\t\tsearch: '',\n\t\t\t\tfilterRole: '',\n\n\t\t\t\t// Modal state\n\t\t\t\tshowCreateModal: false,\n\t\t\t\tshowEditModal: false,\n\t\t\t\tshowPasswordModal: false,\n\t\t\t\tshowDeleteModal: false,\n\t\t\t\tselectedUser: null,\n\t\t\t\tformError: '',\n\n\t\t\t\t// Create form\n\t\t\t\tcreateForm: {\n\t\t\t\t\tusername: '',\n\t\t\t\t\temail: '',\n\t\t\t\t\tpassword: '',\n\t\t\t\t\trole: 'viewer'\n\t\t\t\t},\n\n\t\t\t\t// Edit form\n\t\t\t\teditForm: {\n\t\t\t\t\temail: '',\n\t\t\t\t\trole: ''\n\t\t\t\t},\n\n\t\t\t\t// Password form\n\t\t\t\tpasswordForm: {\n\t\t\t\t\tpassword: '',\n\t\t\t\t\tconfirm: ''\n\t\t\t\t},\n\n\t\t\t\tinit() {\n\t\t\t\t\tthis.loadUsers();\n\t\t\t\t},\n\n\t\t\t\tasync loadUsers() {\n\t\t\t\t\tthis.loading = true;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst res = await csrfFetch('/api/v1/users');\n\t\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\t\tconst data = await res.json();\n\t\t\t\t\t\t\tthis.users = data.data || [];\n\t\t\t\t\t\t\tthis.filterUsers();\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error('Failed to load users:', e);\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tfilterUsers() {\n\t\t\t\t\tlet filtered = [...this.users];\n\n\t\t\t\t\tif (this.search) {\n\t\t\t\t\t\tconst q = this.search.toLowerCase();\n\t\t\t\t\t\tfiltered = filtered.filter(u =>\n\t\t\t\t\t\t\tu.username.toLowerCase().includes(q) ||\n\t\t\t\t\t\t\tu.email.toLowerCase().includes(q)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.filterRole) {\n\t\t\t\t\t\tfiltered = filtered.filter(u => u.role === this.filterRole);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.filteredUsers = filtered;\n\t\t\t\t\tthis.renderTable();\n\t\t\t\t},\n\n\t\t\t\trenderTable() {\n\t\t\t\t\tconst tbody = document.getElementById('users-tbody');\n\t\t\t\t\tif (!tbody) return;\n\n\t\t\t\t\twhile (tbody.firstChild) {\n\t\t\t\t\t\ttbody.removeChild(tbody.firstChild);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.filteredUsers.forEach(user => {\n\t\t\t\t\t\tconst tr = document.createElement('tr');\n\t\t\t\t\ttr.className = 'hover:bg-slate-50/70';\n\n\t\t\t\t\t\t// User cell (avatar + username)\n\t\t\t\t\t\tconst tdUser = document.createElement('td');\n\t\t\t\t\t\ttdUser.className = 'px-6 py-4 whitespace-nowrap';\n\t\t\t\t\t\tconst userDiv = document.createElement('div');\n\t\t\t\t\t\tuserDiv.className = 'flex items-center';\n\t\t\t\t\t\t// Avatar\n\t\t\t\t\t\tconst avatar = document.createElement('div');\n\t\t\t\t\tavatar.className = 'w-8 h-8 bg-teal-600 rounded-full flex items-center justify-center flex-shrink-0';\n\t\t\t\t\t\tconst avatarText = document.createElement('span');\n\t\t\t\t\t\tavatarText.className = 'text-white text-sm font-medium';\n\t\t\t\t\t\tavatarText.textContent = user.username.charAt(0).toUpperCase();\n\t\t\t\t\t\tavatar.appendChild(avatarText);\n\t\t\t\t\t\tuserDiv.appendChild(avatar);\n\t\t\t\t\t\t// Username\n\t\t\t\t\t\tconst nameDiv = document.createElement('div');\n\t\t\t\t\t\tnameDiv.className = 'ml-3';\n\t\t\t\t\t\tconst username = document.createElement('div');\n\t\t\t\t\tusername.className = 'text-sm font-medium text-slate-900';\n\t\t\t\t\t\tusername.textContent = user.username;\n\t\t\t\t\t\tnameDiv.appendChild(username);\n\t\t\t\t\t\tif (user.id === this.currentUserId) {\n\t\t\t\t\t\t\tconst youBadge = document.createElement('span');\n\t\t\t\t\t\tyouBadge.className = 'text-xs text-teal-700';\n\t\t\t\t\t\t\tyouBadge.textContent = '(You)';\n\t\t\t\t\t\t\tnameDiv.appendChild(youBadge);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tuserDiv.appendChild(nameDiv);\n\t\t\t\t\t\ttdUser.appendChild(userDiv);\n\t\t\t\t\t\ttr.appendChild(tdUser);\n\n\t\t\t\t\t\t// Email cell\n\t\t\t\t\t\tconst tdEmail = document.createElement('td');\n\t\t\t\t\ttdEmail.className = 'px-6 py-4 whitespace-nowrap text-sm text-slate-500';\n\t\t\t\t\t\ttdEmail.textContent = user.email;\n\t\t\t\t\t\ttr.appendChild(tdEmail);\n\n\t\t\t\t\t\t// Role cell\n\t\t\t\t\t\tconst tdRole = document.createElement('td');\n\t\t\t\t\t\ttdRole.className = 'px-6 py-4 whitespace-nowrap';\n\t\t\t\t\t\tconst roleBadge = document.createElement('span');\n\t\t\t\t\t\troleBadge.className = this.getRoleBadgeClass(user.role);\n\t\t\t\t\t\troleBadge.textContent = user.role;\n\t\t\t\t\t\ttdRole.appendChild(roleBadge);\n\t\t\t\t\t\ttr.appendChild(tdRole);\n\n\t\t\t\t\t\t// Created cell\n\t\t\t\t\t\tconst tdCreated = document.createElement('td');\n\t\t\t\t\ttdCreated.className = 'px-6 py-4 whitespace-nowrap text-sm text-slate-500';\n\t\t\t\t\t\ttdCreated.textContent = new Date(user.created_at).toLocaleDateString();\n\t\t\t\t\t\ttr.appendChild(tdCreated);\n\n\t\t\t\t\t\t// Actions cell\n\t\t\t\t\t\tconst tdActions = document.createElement('td');\n\t\t\t\t\t\ttdActions.className = 'px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2';\n\n\t\t\t\t\t\tconst editBtn = document.createElement('button');\n\t\t\t\t\teditBtn.className = 'text-teal-700 hover:text-teal-900';\n\t\t\t\t\t\teditBtn.textContent = 'Edit';\n\t\t\t\t\t\teditBtn.onclick = () => this.openEdit(user);\n\t\t\t\t\t\ttdActions.appendChild(editBtn);\n\n\t\t\t\t\t\tconst pwBtn = document.createElement('button');\n\t\t\t\t\tpwBtn.className = 'text-amber-600 hover:text-amber-900';\n\t\t\t\t\t\tpwBtn.textContent = 'Password';\n\t\t\t\t\t\tpwBtn.onclick = () => this.openPassword(user);\n\t\t\t\t\t\ttdActions.appendChild(pwBtn);\n\n\t\t\t\t\t\t// Can't delete yourself\n\t\t\t\t\t\tif (user.id !== this.currentUserId) {\n\t\t\t\t\t\t\tconst delBtn = document.createElement('button');\n\t\t\t\t\t\tdelBtn.className = 'text-rose-600 hover:text-rose-900';\n\t\t\t\t\t\t\tdelBtn.textContent = 'Delete';\n\t\t\t\t\t\t\tdelBtn.onclick = () => this.openDelete(user);\n\t\t\t\t\t\t\ttdActions.appendChild(delBtn);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttr.appendChild(tdActions);\n\t\t\t\t\t\ttbody.appendChild(tr);\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\tgetRoleBadgeClass(role) {\n\t\t\t\tswitch (role) {\n\t\t\t\t\tcase 'admin': return 'badge badge-teal';\n\t\t\t\t\tcase 'operator': return 'badge badge-sky';\n\t\t\t\t\tcase 'viewer': return 'badge badge-slate';\n\t\t\t\t\tdefault: return 'badge badge-slate';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t\topenCreate() {\n\t\t\t\t\tthis.createForm = {\n\t\t\t\t\t\tusername: '',\n\t\t\t\t\t\temail: '',\n\t\t\t\t\t\tpassword: '',\n\t\t\t\t\t\trole: 'viewer'\n\t\t\t\t\t};\n\t\t\t\t\tthis.formError = '';\n\t\t\t\t\tthis.showCreateModal = true;\n\t\t\t\t},\n\n\t\t\t\topenEdit(user) {\n\t\t\t\t\tthis.selectedUser = user;\n\t\t\t\t\tthis.editForm = {\n\t\t\t\t\t\temail: user.email,\n\t\t\t\t\t\trole: user.role\n\t\t\t\t\t};\n\t\t\t\t\tthis.formError = '';\n\t\t\t\t\tthis.showEditModal = true;\n\t\t\t\t},\n\n\t\t\t\topenPassword(user) {\n\t\t\t\t\tthis.selectedUser = user;\n\t\t\t\t\tthis.passwordForm = {\n\t\t\t\t\t\tpassword: '',\n\t\t\t\t\t\tconfirm: ''\n\t\t\t\t\t};\n\t\t\t\t\tthis.formError = '';\n\t\t\t\t\tthis.showPasswordModal = true;\n\t\t\t\t},\n\n\t\t\t\topenDelete(user) {\n\t\t\t\t\tthis.selectedUser = user;\n\t\t\t\t\tthis.showDeleteModal = true;\n\t\t\t\t},\n\n\t\t\t\tasync createUser() {\n\t\t\t\t\tthis.formError = '';\n\n\t\t\t\t\t// Validate\n\t\t\t\t\tif (!this.createForm.username.trim()) {\n\t\t\t\t\t\tthis.formError = 'Username is required';\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (!this.createForm.email.trim()) {\n\t\t\t\t\t\tthis.formError = 'Email is required';\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (!this.createForm.password) {\n\t\t\t\t\t\tthis.formError = 'Password is required';\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.createForm.password.length < 8) {\n\t\t\t\t\t\tthis.formError = 'Password must be at least 8 characters';\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.saving = true;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst res = await csrfFetch('/api/v1/users', {\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\t\t\t\t\tbody: JSON.stringify(this.createForm)\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\t\tthis.showCreateModal = false;\n\t\t\t\t\t\t\tthis.loadUsers();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst data = await res.json();\n\t\t\t\t\t\t\tthis.formError = data.error?.message || 'Failed to create user';\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tthis.formError = 'Network error. Please try again.';\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.saving = false;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tasync updateUser() {\n\t\t\t\t\tif (!this.selectedUser) return;\n\t\t\t\t\tthis.formError = '';\n\n\t\t\t\t\tif (!this.editForm.email.trim()) {\n\t\t\t\t\t\tthis.formError = 'Email is required';\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.saving = true;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst res = await csrfFetch('/api/v1/users/' + this.selectedUser.id, {\n\t\t\t\t\t\t\tmethod: 'PUT',\n\t\t\t\t\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\t\t\t\t\tbody: JSON.stringify(this.editForm)\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\t\tthis.showEditModal = false;\n\t\t\t\t\t\t\tthis.loadUsers();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst data = await res.json();\n\t\t\t\t\t\t\tthis.formError = data.error?.message || 'Failed to update user';\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tthis.formError = 'Network error. Please try again.';\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.saving = false;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tasync resetPassword() {\n\t\t\t\t\tif (!this.selectedUser) return;\n\t\t\t\t\tthis.formError = '';\n\n\t\t\t\t\tif (!this.passwordForm.password) {\n\t\t\t\t\t\tthis.formError = 'Password is required';\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.passwordForm.password.length < 8) {\n\t\t\t\t\t\tthis.formError = 'Password must be at least 8 characters';\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (this.passwordForm.password !== this.passwordForm.confirm) {\n\t\t\t\t\t\tthis.formError = 'Passwords do not match';\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.saving = true;\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// For admin resetting another user's password, use PUT /users/:id with password field\n\t\t\t\t\t\tconst res = await csrfFetch('/api/v1/users/' + this.selectedUser.id + '/password', {\n\t\t\t\t\t\t\tmethod: 'PUT',\n\t\t\t\t\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\t\t\t\t\tbody: JSON.stringify({ password: this.passwordForm.password })\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\t\tthis.showPasswordModal = false;\n\t\t\t\t\t\t\talert('Password reset successfully');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst data = await res.json();\n\t\t\t\t\t\t\tthis.formError = data.error?.message || 'Failed to reset password';\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tthis.formError = 'Network error. Please try again.';\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.saving = false;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tasync deleteUser() {\n\t\t\t\t\tif (!this.selectedUser) return;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst res = await csrfFetch('/api/v1/users/' + this.selectedUser.id, {\n\t\t\t\t\t\t\tmethod: 'DELETE'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\t\tthis.showDeleteModal = false;\n\t\t\t\t\t\t\tthis.selectedUser = null;\n\t\t\t\t\t\t\tthis.loadUsers();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst data = await res.json();\n\t\t\t\t\t\t\talert(data.error?.message || 'Failed to delete user');\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\talert('Network error. Please try again.');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t</script>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
