// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.977
// internal/web/templates/pages/settings_projects.templ

package pages

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"github.com/good-yellow-bee/blazelog/internal/web/session"
	"github.com/good-yellow-bee/blazelog/internal/web/templates/components"
	"github.com/good-yellow-bee/blazelog/internal/web/templates/layouts"
)

func SettingsProjects(user *session.Session, csrfToken string, cspNonce string) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div x-data=\"projectsController\" x-init=\"init()\" class=\"space-y-6\"><!-- Header --><div class=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\"><div><h1 class=\"page-title\">Projects</h1><p class=\"page-subtitle\">Manage projects and team members</p></div><button @click=\"openCreate()\" class=\"btn-primary w-auto\"><svg class=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"></path></svg> Create Project</button></div><!-- Search --><div class=\"panel-soft p-4\"><div class=\"max-w-md\"><label class=\"label\">Search</label> <input type=\"text\" x-model=\"search\" @input.debounce.300ms=\"filterProjects()\" placeholder=\"Search projects...\" class=\"input-field\"></div></div><!-- Projects Table --><div class=\"table-shell overflow-hidden\"><!-- Loading state --><div x-show=\"loading\" class=\"p-8 text-center\"><svg class=\"animate-spin h-8 w-8 mx-auto text-teal-600\" fill=\"none\" viewBox=\"0 0 24 24\"><circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle> <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg><p class=\"mt-2 text-slate-500\">Loading projects...</p></div><!-- Empty state --><div x-show=\"!loading && filteredProjects.length === 0\" class=\"p-8 text-center\"><svg class=\"mx-auto h-12 w-12 text-slate-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z\"></path></svg><h3 class=\"mt-2 text-sm font-semibold text-slate-900\">No projects found</h3><p class=\"mt-1 text-sm text-slate-500\">Get started by creating a new project.</p></div><!-- Table --><div x-show=\"!loading && filteredProjects.length > 0\" class=\"overflow-x-auto\"><table class=\"min-w-full divide-y divide-slate-200/70\"><thead class=\"table-head\"><tr><th class=\"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-500\">Name</th><th class=\"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-500\">Description</th><th class=\"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-500\">Members</th><th class=\"px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-slate-500\">Created</th><th class=\"px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-slate-500\">Actions</th></tr></thead> <tbody id=\"projects-tbody\" class=\"divide-y divide-slate-200/70\"><!-- Rows rendered by Alpine.js --></tbody></table></div></div><!-- Create/Edit Modal -->")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = ProjectFormModal().Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "<!-- Members Modal -->")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = ProjectMembersModal().Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "<!-- Delete Confirmation -->")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = components.ConfirmDialogDynamic(
				"showDeleteModal",
				"deleteProject()",
				"'Delete Project'",
				"deleteProjectConfirmText()",
			).Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "</div>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = ProjectsScript(cspNonce).Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = layouts.Base("Projects", user, csrfToken, cspNonce).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func ProjectFormModal() templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var3 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var3 == nil {
			templ_7745c5c3_Var3 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var4 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Var5 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
				templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
				templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
				if !templ_7745c5c3_IsBuffer {
					defer func() {
						templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
						if templ_7745c5c3_Err == nil {
							templ_7745c5c3_Err = templ_7745c5c3_BufErr
						}
					}()
				}
				ctx = templ.InitializeContext(ctx)
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "<div class=\"space-y-4\"><!-- Name --><div><label class=\"label\">Name <span class=\"text-red-500\">*</span></label> <input type=\"text\" x-model=\"form.name\" class=\"input-field\" placeholder=\"Project name\"><p x-show=\"errors.name\" x-text=\"errors.name\" class=\"mt-1 text-sm text-red-600\"></p></div><!-- Description --><div><label class=\"label\">Description</label> <textarea x-model=\"form.description\" class=\"input-field\" rows=\"3\" placeholder=\"Optional project description\"></textarea></div><!-- Error message --><div x-show=\"formError\" class=\"p-3 bg-rose-50 text-rose-700 rounded-md text-sm\" x-text=\"formError\"></div></div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				return nil
			})
			templ_7745c5c3_Err = components.ModalBody().Render(templ.WithChildren(ctx, templ_7745c5c3_Var5), templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, " ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Var6 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
				templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
				templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
				if !templ_7745c5c3_IsBuffer {
					defer func() {
						templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
						if templ_7745c5c3_Err == nil {
							templ_7745c5c3_Err = templ_7745c5c3_BufErr
						}
					}()
				}
				ctx = templ.InitializeContext(ctx)
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "<button type=\"button\" @click=\"showFormModal = false\" class=\"btn-secondary\">Cancel</button> <button type=\"button\" @click=\"saveProject()\" :disabled=\"saving\" class=\"btn-primary w-auto\"><span x-show=\"!saving\">Save</span> <span x-show=\"saving\">Saving...</span></button>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				return nil
			})
			templ_7745c5c3_Err = components.ModalFooter().Render(templ.WithChildren(ctx, templ_7745c5c3_Var6), templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = components.ModalWithFooter("showFormModal", "formTitle").Render(templ.WithChildren(ctx, templ_7745c5c3_Var4), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func ProjectMembersModal() templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var7 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var7 == nil {
			templ_7745c5c3_Var7 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var8 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Var9 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
				templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
				templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
				if !templ_7745c5c3_IsBuffer {
					defer func() {
						templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
						if templ_7745c5c3_Err == nil {
							templ_7745c5c3_Err = templ_7745c5c3_BufErr
						}
					}()
				}
				ctx = templ.InitializeContext(ctx)
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, "<div class=\"space-y-4\"><!-- Members list --><div x-show=\"!loadingMembers && members.length > 0\" class=\"divide-y divide-slate-200/70\"><template x-for=\"member in members\" :key=\"member.user_id\"><div class=\"py-3 flex items-center justify-between\"><div class=\"flex items-center\"><div class=\"w-8 h-8 bg-teal-600 rounded-full flex items-center justify-center flex-shrink-0\"><span class=\"text-white text-sm font-medium\" x-text=\"member.username.charAt(0).toUpperCase()\"></span></div><div class=\"ml-3\"><p class=\"text-sm font-medium text-slate-900\" x-text=\"member.username\"></p><p class=\"text-sm text-slate-500\" x-text=\"member.email\"></p></div></div><div class=\"flex items-center gap-2\"><span class=\"badge\" :class=\"member.role === 'admin' ? 'badge-teal' : member.role === 'operator' ? 'badge-sky' : 'badge-slate'\" x-text=\"member.role\"></span> <button @click=\"removeMember(member.user_id)\" class=\"text-rose-600 hover:text-rose-900 text-sm\">Remove</button></div></div></template></div><!-- Empty members --><div x-show=\"!loadingMembers && members.length === 0\" class=\"text-center py-4 text-slate-500 text-sm\">No members yet</div><!-- Loading members --><div x-show=\"loadingMembers\" class=\"text-center py-4\"><svg class=\"animate-spin h-6 w-6 mx-auto text-teal-600\" fill=\"none\" viewBox=\"0 0 24 24\"><circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle> <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z\"></path></svg></div><!-- Add member form --><div class=\"pt-4 border-t border-slate-200/70\"><h4 class=\"text-sm font-semibold text-slate-900 mb-3\">Add Member</h4><div class=\"flex gap-2\"><select x-model=\"addMemberForm.user_id\" class=\"select-field flex-1\"><option value=\"\">Select user...</option><template x-for=\"u in availableUsers\" :key=\"u.id\"><option :value=\"u.id\" x-text=\"u.username + ' (' + u.email + ')'\"></option></template></select> <select x-model=\"addMemberForm.role\" class=\"select-field w-32\"><option value=\"viewer\">Viewer</option> <option value=\"operator\">Operator</option> <option value=\"admin\">Admin</option></select> <button @click=\"addMember()\" :disabled=\"!addMemberForm.user_id\" class=\"btn-primary w-auto px-4\">Add</button></div></div></div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				return nil
			})
			templ_7745c5c3_Err = components.ModalBody().Render(templ.WithChildren(ctx, templ_7745c5c3_Var9), templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, " ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Var10 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
				templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
				templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
				if !templ_7745c5c3_IsBuffer {
					defer func() {
						templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
						if templ_7745c5c3_Err == nil {
							templ_7745c5c3_Err = templ_7745c5c3_BufErr
						}
					}()
				}
				ctx = templ.InitializeContext(ctx)
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, "<button type=\"button\" @click=\"showMembersModal = false\" class=\"btn-secondary\">Close</button>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				return nil
			})
			templ_7745c5c3_Err = components.ModalFooter().Render(templ.WithChildren(ctx, templ_7745c5c3_Var10), templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = components.ModalWithFooter("showMembersModal", "membersModalTitle()").Render(templ.WithChildren(ctx, templ_7745c5c3_Var8), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func ProjectsScript(cspNonce string) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var11 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var11 == nil {
			templ_7745c5c3_Var11 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 11, "<script nonce=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var12 string
		templ_7745c5c3_Var12, templ_7745c5c3_Err = templ.JoinStringErrs(cspNonce)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/settings_projects.templ`, Line: 228, Col: 25}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var12))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 12, "\">\n\t\tdocument.addEventListener('alpine:init', () => {\n\t\t\tAlpine.data('projectsController', () => ({\n\t\t\t\t// Data\n\t\t\t\tprojects: [],\n\t\t\t\tfilteredProjects: [],\n\t\t\t\tmembers: [],\n\t\t\t\tallUsers: [],\n\t\t\t\tloading: false,\n\t\t\t\tsaving: false,\n\t\t\t\tloadingMembers: false,\n\n\t\t\t\t// Filters\n\t\t\t\tsearch: '',\n\n\t\t\t\t// Modal state\n\t\t\t\tshowFormModal: false,\n\t\t\t\tshowMembersModal: false,\n\t\t\t\tshowDeleteModal: false,\n\t\t\t\tselectedProject: null,\n\t\t\t\tformTitle: 'Create Project',\n\t\t\t\tformError: '',\n\t\t\t\terrors: {},\n\n\t\t\t\t// Form data\n\t\t\t\tform: {\n\t\t\t\t\tname: '',\n\t\t\t\t\tdescription: ''\n\t\t\t\t},\n\n\t\t\t\t// Add member form\n\t\t\t\taddMemberForm: {\n\t\t\t\t\tuser_id: '',\n\t\t\t\t\trole: 'viewer'\n\t\t\t\t},\n\n\t\t\t\tget availableUsers() {\n\t\t\t\t\tconst memberIds = this.members.map(m => m.user_id);\n\t\t\t\t\treturn this.allUsers.filter(u => !memberIds.includes(u.id));\n\t\t\t\t},\n\n\t\t\t\tselectedProjectName() {\n\t\t\t\t\treturn this.selectedProject && this.selectedProject.name ? this.selectedProject.name : '';\n\t\t\t\t},\n\n\t\t\t\tmembersModalTitle() {\n\t\t\t\t\treturn 'Members: ' + this.selectedProjectName();\n\t\t\t\t},\n\n\t\t\t\tdeleteProjectConfirmText() {\n\t\t\t\t\treturn 'Are you sure you want to delete \"' + this.selectedProjectName() + '\"? This action cannot be undone.';\n\t\t\t\t},\n\n\t\t\t\tinit() {\n\t\t\t\t\tthis.loadProjects();\n\t\t\t\t\tthis.loadUsers();\n\t\t\t\t},\n\n\t\t\t\tasync loadUsers() {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst res = await csrfFetch('/api/v1/users');\n\t\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\t\tconst data = await res.json();\n\t\t\t\t\t\t\tthis.allUsers = data.data || [];\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error('Failed to load users:', e);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tasync loadProjects() {\n\t\t\t\t\tthis.loading = true;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst res = await csrfFetch('/api/v1/projects');\n\t\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\t\tconst data = await res.json();\n\t\t\t\t\t\t\tthis.projects = data.data || [];\n\t\t\t\t\t\t\tthis.filterProjects();\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error('Failed to load projects:', e);\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.loading = false;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tfilterProjects() {\n\t\t\t\t\tif (!this.search) {\n\t\t\t\t\t\tthis.filteredProjects = [...this.projects];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst q = this.search.toLowerCase();\n\t\t\t\t\t\tthis.filteredProjects = this.projects.filter(p =>\n\t\t\t\t\t\t\tp.name.toLowerCase().includes(q) ||\n\t\t\t\t\t\t\t(p.description && p.description.toLowerCase().includes(q))\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tthis.renderTable();\n\t\t\t\t},\n\n\t\t\t\trenderTable() {\n\t\t\t\t\tconst tbody = document.getElementById('projects-tbody');\n\t\t\t\t\tif (!tbody) return;\n\n\t\t\t\t\twhile (tbody.firstChild) {\n\t\t\t\t\t\ttbody.removeChild(tbody.firstChild);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.filteredProjects.forEach(project => {\n\t\t\t\t\t\tconst tr = document.createElement('tr');\n\t\t\t\t\ttr.className = 'hover:bg-slate-50/70';\n\n\t\t\t\t\t\t// Name cell\n\t\t\t\t\t\tconst tdName = document.createElement('td');\n\t\t\t\t\ttdName.className = 'px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900';\n\t\t\t\t\t\ttdName.textContent = project.name;\n\t\t\t\t\t\ttr.appendChild(tdName);\n\n\t\t\t\t\t\t// Description cell\n\t\t\t\t\t\tconst tdDesc = document.createElement('td');\n\t\t\t\t\ttdDesc.className = 'px-6 py-4 text-sm text-slate-500 max-w-xs truncate';\n\t\t\t\t\t\ttdDesc.textContent = project.description || '-';\n\t\t\t\t\t\ttr.appendChild(tdDesc);\n\n\t\t\t\t\t\t// Members cell - placeholder count\n\t\t\t\t\t\tconst tdMembers = document.createElement('td');\n\t\t\t\t\t\ttdMembers.className = 'px-6 py-4 whitespace-nowrap';\n\t\t\t\t\t\tconst membersBtn = document.createElement('button');\n\t\t\t\t\tmembersBtn.className = 'text-teal-700 hover:text-teal-900 text-sm';\n\t\t\t\t\t\tmembersBtn.textContent = 'Manage';\n\t\t\t\t\t\tmembersBtn.onclick = () => this.openMembers(project);\n\t\t\t\t\t\ttdMembers.appendChild(membersBtn);\n\t\t\t\t\t\ttr.appendChild(tdMembers);\n\n\t\t\t\t\t\t// Created cell\n\t\t\t\t\t\tconst tdCreated = document.createElement('td');\n\t\t\t\t\ttdCreated.className = 'px-6 py-4 whitespace-nowrap text-sm text-slate-500';\n\t\t\t\t\t\ttdCreated.textContent = new Date(project.created_at).toLocaleDateString();\n\t\t\t\t\t\ttr.appendChild(tdCreated);\n\n\t\t\t\t\t\t// Actions cell\n\t\t\t\t\t\tconst tdActions = document.createElement('td');\n\t\t\t\t\t\ttdActions.className = 'px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2';\n\n\t\t\t\t\t\tconst editBtn = document.createElement('button');\n\t\t\t\t\teditBtn.className = 'text-teal-700 hover:text-teal-900';\n\t\t\t\t\t\teditBtn.textContent = 'Edit';\n\t\t\t\t\t\teditBtn.onclick = () => this.openEdit(project);\n\t\t\t\t\t\ttdActions.appendChild(editBtn);\n\n\t\t\t\t\t\tconst delBtn = document.createElement('button');\n\t\t\t\t\t\tdelBtn.className = 'text-red-600 hover:text-red-900';\n\t\t\t\t\t\tdelBtn.textContent = 'Delete';\n\t\t\t\t\t\tdelBtn.onclick = () => this.openDelete(project);\n\t\t\t\t\t\ttdActions.appendChild(delBtn);\n\n\t\t\t\t\t\ttr.appendChild(tdActions);\n\t\t\t\t\t\ttbody.appendChild(tr);\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tresetForm() {\n\t\t\t\t\tthis.form = { name: '', description: '' };\n\t\t\t\t\tthis.errors = {};\n\t\t\t\t\tthis.formError = '';\n\t\t\t\t},\n\n\t\t\t\topenCreate() {\n\t\t\t\t\tthis.resetForm();\n\t\t\t\t\tthis.selectedProject = null;\n\t\t\t\t\tthis.formTitle = 'Create Project';\n\t\t\t\t\tthis.showFormModal = true;\n\t\t\t\t},\n\n\t\t\t\topenEdit(project) {\n\t\t\t\t\tthis.selectedProject = project;\n\t\t\t\t\tthis.formTitle = 'Edit Project';\n\t\t\t\t\tthis.form = {\n\t\t\t\t\t\tname: project.name,\n\t\t\t\t\t\tdescription: project.description || ''\n\t\t\t\t\t};\n\t\t\t\t\tthis.errors = {};\n\t\t\t\t\tthis.formError = '';\n\t\t\t\t\tthis.showFormModal = true;\n\t\t\t\t},\n\n\t\t\t\topenDelete(project) {\n\t\t\t\t\tthis.selectedProject = project;\n\t\t\t\t\tthis.showDeleteModal = true;\n\t\t\t\t},\n\n\t\t\t\tasync openMembers(project) {\n\t\t\t\t\tthis.selectedProject = project;\n\t\t\t\t\tthis.members = [];\n\t\t\t\t\tthis.addMemberForm = { user_id: '', role: 'viewer' };\n\t\t\t\t\tthis.showMembersModal = true;\n\t\t\t\t\tawait this.loadMembers();\n\t\t\t\t},\n\n\t\t\t\tasync loadMembers() {\n\t\t\t\t\tif (!this.selectedProject) return;\n\t\t\t\t\tthis.loadingMembers = true;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst res = await csrfFetch(`/api/v1/projects/${this.selectedProject.id}/users`);\n\t\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\t\tconst data = await res.json();\n\t\t\t\t\t\t\tthis.members = data.data || [];\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error('Failed to load members:', e);\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.loadingMembers = false;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tasync saveProject() {\n\t\t\t\t\tthis.errors = {};\n\t\t\t\t\tthis.formError = '';\n\n\t\t\t\t\tif (!this.form.name.trim()) {\n\t\t\t\t\t\tthis.errors.name = 'Name is required';\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.saving = true;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst url = this.selectedProject\n\t\t\t\t\t\t\t? `/api/v1/projects/${this.selectedProject.id}`\n\t\t\t\t\t\t\t: '/api/v1/projects';\n\t\t\t\t\t\tconst method = this.selectedProject ? 'PUT' : 'POST';\n\n\t\t\t\t\t\tconst res = await csrfFetch(url, {\n\t\t\t\t\t\t\tmethod: method,\n\t\t\t\t\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\t\t\t\t\tbody: JSON.stringify(this.form)\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\t\tthis.showFormModal = false;\n\t\t\t\t\t\t\tthis.loadProjects();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst data = await res.json();\n\t\t\t\t\t\t\tthis.formError = data.error?.message || 'Failed to save project';\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tthis.formError = 'Network error. Please try again.';\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.saving = false;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tasync deleteProject() {\n\t\t\t\t\tif (!this.selectedProject) return;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst res = await csrfFetch(`/api/v1/projects/${this.selectedProject.id}`, {\n\t\t\t\t\t\t\tmethod: 'DELETE'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\t\tthis.showDeleteModal = false;\n\t\t\t\t\t\t\tthis.selectedProject = null;\n\t\t\t\t\t\t\tthis.loadProjects();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst data = await res.json();\n\t\t\t\t\t\t\talert(data.error?.message || 'Failed to delete project');\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\talert('Network error. Please try again.');\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tasync addMember() {\n\t\t\t\t\tif (!this.selectedProject || !this.addMemberForm.user_id) return;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst res = await csrfFetch(`/api/v1/projects/${this.selectedProject.id}/users`, {\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\t\t\t\t\tbody: JSON.stringify(this.addMemberForm)\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\t\tthis.addMemberForm = { user_id: '', role: 'viewer' };\n\t\t\t\t\t\t\tawait this.loadMembers();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst data = await res.json();\n\t\t\t\t\t\t\talert(data.error?.message || 'Failed to add member');\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\talert('Network error. Please try again.');\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tasync removeMember(userId) {\n\t\t\t\t\tif (!this.selectedProject) return;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst res = await csrfFetch(`/api/v1/projects/${this.selectedProject.id}/users/${userId}`, {\n\t\t\t\t\t\t\tmethod: 'DELETE'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\t\tawait this.loadMembers();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst data = await res.json();\n\t\t\t\t\t\t\talert(data.error?.message || 'Failed to remove member');\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\talert('Network error. Please try again.');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\t\t});\n\t</script>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
